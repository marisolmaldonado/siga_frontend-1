<p-toast></p-toast>
<div class="p-fluid">
    <form [formGroup]="formLocation">
        <p-card header="Localización">
            <div class="p-formgrid p-grid">
                <div class="p-lg-6 p-md-6 p-sm-12">
                    <p-autoComplete formControlName="country" [suggestions]="filteredCountries"
                                    (completeMethod)="filterCountry($event)"
                                    field="name" [dropdown]="true"
                                    (onSelect)="updateValue(countryField);loadProvinces()"
                                    (onKeyUp)="updateValue(countryField)"
                                    placeholder="* País">
                        <ng-template let-country pTemplate="item">
                            <div class="country-item">
                                <div>{{country.name}}</div>
                            </div>
                        </ng-template>
                    </p-autoComplete>
                    <div *ngIf="countryField.invalid && (countryField.touched || countryField.dirty)">
                        <small *ngIf="countryField.errors?.required"
                               id="country-help-1" class="p-error">
                            El campo es obligatorio.
                        </small>
                    </div>
                </div>
                <div *ngIf="option>1" class="p-lg-6 p-md-6 p-sm-12">
                    <p-autoComplete formControlName="province" [suggestions]="filteredProvinces"
                                    (completeMethod)="filterProvince($event)"
                                    field="name" [dropdown]="true"
                                    (onSelect)="updateValue(provinceField);loadCantons()"
                                    (onKeyUp)="updateValue(provinceField)"
                                    placeholder="* Provincia">
                        <ng-template let-province pTemplate="item">
                            <div class="country-item">
                                <div>{{province.name}}</div>
                            </div>
                        </ng-template>
                    </p-autoComplete>
                    <div *ngIf="provinceField.invalid && (provinceField.touched || provinceField.dirty)">
                        <small *ngIf="provinceField.errors?.required"
                               id="province-help-1" class="p-error">
                            El campo es obligatorio.
                        </small>
                    </div>
                </div>
            </div>
            <div class="p-formgrid p-grid">
                <div *ngIf="option>2" class="p-lg-6 p-md-6 p-sm-12">
                    <p-autoComplete formControlName="canton" [suggestions]="filteredCantons"
                                    (completeMethod)="filterCanton($event)"
                                    field="name" [dropdown]="true" placeholder="* Cantón"
                                    (onSelect)="updateValue(cantonField);loadParishes()"
                                    (onKeyUp)="updateValue(cantonField)">
                        <ng-template let-canton pTemplate="item">
                            <div class="country-item">
                                <div>{{canton.name}}</div>
                            </div>
                        </ng-template>
                    </p-autoComplete>
                    <div *ngIf="cantonField.invalid && (cantonField.touched || cantonField.dirty)">
                        <small *ngIf="cantonField.errors?.required"
                               id="canton-help-1" class="p-error">
                            El campo es obligatorio.
                        </small>
                    </div>
                </div>
                <div *ngIf="option>3" class="p-lg-6 p-md-6 p-sm-12">
                    <p-autoComplete formControlName="parish" [suggestions]="filteredParishes"
                                    (completeMethod)="filterParish($event)"
                                    field="name" [dropdown]="true" placeholder="* Parroquia"
                                    (onSelect)="updateValue(parishField);"
                                    (onKeyUp)="updateValue(parishField)">
                        <ng-template let-parish pTemplate="item">
                            <div class="country-item">
                                <div>{{parish.name}}</div>
                            </div>
                        </ng-template>
                    </p-autoComplete>
                    <div *ngIf="parishField.errors && (parishField.touched || parishField.dirty)">
                        <small *ngIf="parishField.errors?.required"
                               id="parish-help-1" class="p-error">
                            El campo es obligatorio.
                        </small>
                    </div>
                </div>
            </div>
        </p-card>
    </form>
</div>
